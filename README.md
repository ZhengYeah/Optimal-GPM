# Optimal Generalized Piecewise Mechanism

This repository contains the code for the paper "Collecting Numerical Data with Bounded Domain:
the Optimal Generalized Piecewise Mechanism under Local Differential Privacy". 


We encode the solving of the optimal m-piece mechanism under a distance metric as a *bilinear* optimization problem 
and solve it using the Gurobi solver.
The solving class for each distance metric can be found in the `src` folder.
Now we support the following distance metrics:
- L1 distance (absolute error)
- L2 distance (squared error)
- Wasserstein distance (a distribution distance, not used in the paper)

## Code Structure

```
|- src (solving classes for different distance metrics)
|- experiments (theoretical and experimental evaluations)
|- validation (validation of the optimal mechanism)
```

## Reproducing the Results

The evaluation section of the paper can be reproduced by running the scripts in the `experiments` folder.

```
|- experiments
  |- theoretical
    |- whole-domain_L1.py, worst-case_L2.py (Figure 7)
    |- whole-domain_circular_L2.py, worst-case_circular_L1.py (Figure 8)
  |- experimental
    |- mean_classical.py, distribution_classical.py (Figure 9)
    |- mean_circular.py, distribution_circular.py (Figure 10)
```

The above scripts will generate `.csv` files containing the results.
Then the plots can be generated by running the scripts beginning with `draw_` in the same folder.

Other results for proving the optimality of the mechanism can be found in the `validation` folder.

```
|- validation
  |- regression (results for the regression example)
  |- figure_345_piece.py (validation of the optimal piece number)
```
