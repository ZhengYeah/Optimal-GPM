# OGPM

Code for paper: [PETS'25] Optimal Piecewise-based Mechanism for Collecting Bounded Numerical Data under Local Differential Privacy

**Contributions:** 

* The first work to study the optimality of piecewise-based mechanism under its most general form.
* The closed-form optimal mechanisms for the classical domain and the circular domain.

## Code Structure

We encode the solving of the optimal $m$-piece mechanism under a distance metric as a *bilinear* optimization problem 
and solve it using the Gurobi solver.
The solving class for each distance metric can be found in the `src` folder.
Now we support the following distance metrics:
- $L_1$ distance (absolute error)
- $L_2$ distance (squared error)
- Wasserstein distance (a distribution distance, not used in the paper)

The main folders and files are as follows:

```
|- src (solving classes for different distance metrics)
|- experiments (theoretical and experimental evaluations in the paper)
|- validation (validation of the optimal mechanism)
|- PM.py (the PM mechanism and its variants)
|- SW.py (the SW mechanism and its variants)
```

## Reproduction 

The evaluation section of the paper can be reproduced by running the scripts in the `experiments` folder.

```
|- experiments
  |- theoretical
    |- whole-domain_L1.py, worst-case_L2.py (Figure 7)
    |- whole-domain_circular_L2.py, worst-case_circular_L1.py (Figure 8)
  |- experimental
    |- mean_classical.py, distribution_classical.py (Figure 9)
    |- mean_circular.py, distribution_circular.py (Figure 10)
```

The above scripts will generate `.csv` files containing the results.
Then the plots can be generated by running the scripts beginning with `draw_` in the same folder.

